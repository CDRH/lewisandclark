<%
  @title = "Map of the Expedition"
  @description = ""

  @extra_css = [stylesheet_link_tag("leaflet", media: "all")]

  @extra_js = []
  @extra_js << javascript_include_tag("leaflet")
  @extra_js << javascript_include_tag("tile.stamen-1.3.0-https")

  inline_js = "<script>"
    if @json.nil?
      inline_js += "var locations = [];"
    else
      inline_js += "var locations = "
      inline_js += @json.html_safe
      inline_js += ";"
    end
  inline_js += "</script>"
  @extra_js << inline_js.html_safe

  @extra_js << javascript_include_tag("map")
%>
<h2>Map</h2>

<p>We are currently in the process of verifying the information presented on this map. If you find any errors, please let us know at cdrh [at] unl.edu.</p>

<%= form_tag(map_path, :method => "get", :class => "input-group form-control") do %>
  <%= hidden_field_tag(:qfield, "text") %>
  <%= text_field_tag(:qtext, params[:qtext], :placeholder => "Search for...", :class => "form-control") %>
  <span class="input-group-btn">
    <%= submit_tag "Search", class: "btn btn-primary", name: nil, data: { disable_with: false } %>
  </span>
<% end %>

<div id="map_container"></div>

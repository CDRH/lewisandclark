<div class="row">
  <div class="col-md-10 col-md-offset-1">
    <h4>Index of names found in Lewis and Clark Journals</h4>

    <ul class="nav nav-tabs">
      <li role="presentation" <%= "class=active" if @selection == "all"%>>
        <%= link_to "All", index_path %>
      </li>
      <li role="presentation" <%= "class=active" if @selection == "nations"%>>
        <%= link_to "Native Nations", index_nations_path %>
      </li>
      <li role="presentation" <%= "class=active" if @selection == "people"%>>
        <%= link_to "People", index_people_path %>
      </li>
      <li role="presentation" <%= "class=active" if @selection == "places"%>>
        <%= link_to "Places", index_places_path %>
      </li>
    </ul>

    <br/>
    Sort by:
    <%= link_to "Alphabetical", sort("index"),
        class: "btn btn-xs #{facet_sort_selected('index', params['sort'])}", role: "button"
    %>
    |
    <%= link_to "Count", sort("count"),
        class: "btn btn-xs #{facet_sort_selected('count', params['sort'])}", role: "button"
    %>

    <br/>


    <ul class="index_list">
      <% @facets.each do |name_type, count| %>
        <li>
          <%
            name, type = name_type.split("||")

            if @field == "lc_index_combined_ss"
              parsed_field = type

              case parsed_field
              when "person"
                parsed_field = "people"
              when "place"
                parsed_field = "places"
              when "native_nation"
                parsed_field = "lc_native_nation_ss"
              end
            else
              parsed_field = @field
            end
          %>
          <%= link_to search_path({ parsed_field => name, "lc_searchtype_s" => "journal_entry" }) do %>
            <span class="index_term"><%= name %></span>
          <% end %>
          <span class="count badge"><%= count %></span>
          <% if type %>
            <span class="index_type">(<%= type.titleize %>)</span>
          <% end %>
        </li>
      <% end %>
    </ul>
  </div>
</div>
